// RUN: %gta3sc %s --config=gtasa --guesser -emit-ir2 -o - | %FileCheck %s

REQUIRE req1_from_main.sc
REQUIRE req1_from_main.sc			// Requiring multiple times has no effect
REQUIRE req1_from_main.sc			// Ditto.
REQUIRE req6_from_everywhere.sc

VAR_INT main_var
CREATE_OBJECT main_obj .0 .0 .0 main_var

LAUNCH_MISSION subscript.sc
LOAD_AND_LAUNCH_MISSION miss1.sc
REGISTER_STREAMED_SCRIPT stream1.sc

TERMINATE_THIS_SCRIPT

// #################### Expected Output ####################
// CHECK-NEXT-L: #DEFINE_MODEL MAIN_OBJ -1
// CHECK-NEXT-L: #DEFINE_MODEL REQ1_OBJ -2
// CHECK-NEXT-L: #DEFINE_MODEL REQ6_OBJ -3
// CHECK-NEXT-L: #DEFINE_MODEL SUBSCRIPT_OBJ -4
// CHECK-NEXT-L: #DEFINE_MODEL REQ3_OBJ -5
// CHECK-NEXT-L: #DEFINE_MODEL REQ7_OBJ -6
// CHECK-NEXT-L: #DEFINE_MODEL MISS1_OBJ -7
// CHECK-NEXT-L: #DEFINE_MODEL REQ4_OBJ -8
// CHECK-NEXT-L: #DEFINE_MODEL STREAM1_OBJ -9
// CHECK-NEXT-L: #DEFINE_MODEL REQ5_OBJ -10
// CHECK-NEXT-L: #DEFINE_STREAM STREAM1 0
// CHECK-NEXT-L: #DEFINE_STREAM AAA 1
// CHECK-NEXT-L: CREATE_OBJECT -1i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &8
// CHECK-NEXT-L: LAUNCH_MISSION @MAIN_3
// CHECK-NEXT-L: LOAD_AND_LAUNCH_MISSION_INTERNAL 0i8
// CHECK-NEXT-L: REGISTER_STREAMED_SCRIPT_INTERNAL 0i8
// CHECK-NEXT-L: TERMINATE_THIS_SCRIPT
// CHECK-NEXT-L: MAIN_1:
// CHECK-NEXT-L: PRINT_HELP 'REQ1'
// CHECK-NEXT-L: CREATE_OBJECT -2i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &12
// CHECK-NEXT-L: GOTO @MAIN_1
// CHECK-NEXT-L: MAIN_2:
// CHECK-NEXT-L: PRINT_HELP 'REQ6'
// CHECK-NEXT-L: CREATE_OBJECT -3i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &16
// CHECK-NEXT-L: GOTO @MAIN_2
// CHECK-NEXT-L: MAIN_3:
// CHECK-NEXT-L: PRINT_HELP 'SUBSC'
// CHECK-NEXT-L: CREATE_OBJECT -4i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &20
// CHECK-NEXT-L: MAIN_4:
// CHECK-NEXT-L: GOTO @MAIN_4
// CHECK-NEXT-L: TERMINATE_THIS_SCRIPT
// CHECK-NEXT-L: MAIN_5:
// CHECK-NEXT-L: PRINT_HELP 'REQ3'
// CHECK-NEXT-L: CREATE_OBJECT -5i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &24
// CHECK-NEXT-L: GOTO @MAIN_5
// CHECK-NEXT-L: MAIN_6:
// CHECK-NEXT-L: PRINT_HELP 'REQ7'
// CHECK-NEXT-L: CREATE_OBJECT -6i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &28
// CHECK-NEXT-L: GOTO @MAIN_6
// CHECK-NEXT-L: #MISSION_BLOCK_START 0
// CHECK-NEXT-L: PRINT_HELP 'MISS1'
// CHECK-NEXT-L: CREATE_OBJECT -7i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &32
// CHECK-NEXT-L: MISSION_0_1:
// CHECK-NEXT-L: GOSUB %MISSION_0_2
// CHECK-NEXT-L: GOTO %MISSION_0_1
// CHECK-NEXT-L: TERMINATE_THIS_SCRIPT
// CHECK-NEXT-L: MISSION_0_2:
// CHECK-NEXT-L: PRINT_HELP 'REQ4'
// CHECK-NEXT-L: CREATE_OBJECT -8i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &36
// CHECK-NEXT-L: GOTO %MISSION_0_2
// CHECK-NEXT-L: #MISSION_BLOCK_END
// CHECK-NEXT-L: #STREAMED_BLOCK_START 0
// CHECK-NEXT-L: PRINT_HELP 'STREAM1'
// CHECK-NEXT-L: CREATE_OBJECT -9i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &40
// CHECK-NEXT-L: STREAM_0_1:
// CHECK-NEXT-L: GOSUB %STREAM_0_2
// CHECK-NEXT-L: GOTO %STREAM_0_1
// CHECK-NEXT-L: TERMINATE_THIS_SCRIPT
// CHECK-NEXT-L: STREAM_0_2:
// CHECK-NEXT-L: PRINT_HELP 'REQ5'
// CHECK-NEXT-L: CREATE_OBJECT -10i8 0x0.000000p+0f 0x0.000000p+0f 0x0.000000p+0f &44
// CHECK-NEXT-L: GOTO %STREAM_0_2
// CHECK-NEXT-L: #STREAMED_BLOCK_END
